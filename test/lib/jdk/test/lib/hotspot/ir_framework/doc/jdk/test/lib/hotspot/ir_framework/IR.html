<!DOCTYPE HTML>
<html lang="en">
<head>
<!-- Generated by javadoc (17) on Wed Apr 14 13:12:12 CEST 2021 -->
<title>IR</title>
<meta name="viewport" content="width=device-width, initial-scale=1">
<meta http-equiv="Content-Type" content="text/html; charset=utf-8">
<meta name="dc.created" content="2021-04-14">
<meta name="description" content="declaration: package: jdk.test.lib.hotspot.ir_framework, annotation type: IR">
<meta name="generator" content="javadoc/ClassWriterImpl">
<link rel="stylesheet" type="text/css" href="../../../../../stylesheet.css" title="Style">
<link rel="stylesheet" type="text/css" href="../../../../../script-dir/jquery-ui.min.css" title="Style">
<link rel="stylesheet" type="text/css" href="../../../../../jquery-ui.overrides.css" title="Style">
<script type="text/javascript" src="../../../../../script.js"></script>
<script type="text/javascript" src="../../../../../script-dir/jquery-3.5.1.min.js"></script>
<script type="text/javascript" src="../../../../../script-dir/jquery-ui.min.js"></script>
</head>
<body class="class-declaration-page">
<script type="text/javascript">var pathtoroot = "../../../../../";
loadScripts(document, 'script');</script>
<noscript>
<div>JavaScript is disabled on your browser.</div>
</noscript>
<div class="flex-box">
<header role="banner" class="flex-header">
<nav role="navigation">
<!-- ========= START OF TOP NAVBAR ======= -->
<div class="top-nav" id="navbar-top">
<div class="skip-nav"><a href="#skip-navbar-top" title="Skip navigation links">Skip navigation links</a></div>
<ul id="navbar-top-firstrow" class="nav-list" title="Navigation">
<li><a href="package-summary.html">Package</a></li>
<li class="nav-bar-cell1-rev">Class</li>
<li><a href="package-tree.html">Tree</a></li>
<li><a href="../../../../../index-files/index-1.html">Index</a></li>
<li><a href="../../../../../help-doc.html">Help</a></li>
</ul>
</div>
<div class="sub-nav">
<div>
<ul class="sub-nav-list">
<li>Summary:&nbsp;</li>
<li>Field&nbsp;|&nbsp;</li>
<li>Required&nbsp;|&nbsp;</li>
<li><a href="#annotation-interface-optional-element-summary">Optional</a></li>
</ul>
<ul class="sub-nav-list">
<li>Detail:&nbsp;</li>
<li>Field&nbsp;|&nbsp;</li>
<li><a href="#annotation-interface-element-detail">Element</a></li>
</ul>
</div>
<div class="nav-list-search"><label for="search">SEARCH:</label>
<input type="text" id="search" value="search" disabled="disabled">
<input type="reset" id="reset" value="reset" disabled="disabled">
</div>
</div>
<!-- ========= END OF TOP NAVBAR ========= -->
<span class="skip-nav" id="skip-navbar-top"></span></nav>
</header>
<div class="flex-content">
<main role="main">
<!-- ======== START OF CLASS DATA ======== -->
<div class="header">
<div class="sub-title"><span class="package-label-in-type">Package</span>&nbsp;<a href="package-summary.html">jdk.test.lib.hotspot.ir_framework</a></div>
<h1 title="Annotation Interface IR" class="title">Annotation Interface IR</h1>
</div>
<section class="description">
<hr>
<div class="type-signature"><span class="annotations"><a href="https://download.java.net/java/early_access/jdk17/docs/api/java.base/java/lang/annotation/Retention.html" title="class or interface in java.lang.annotation" class="external-link">@Retention</a>(<a href="https://download.java.net/java/early_access/jdk17/docs/api/java.base/java/lang/annotation/RetentionPolicy.html#RUNTIME" title="class or interface in java.lang.annotation" class="external-link">RUNTIME</a>)
<a href="https://download.java.net/java/early_access/jdk17/docs/api/java.base/java/lang/annotation/Repeatable.html" title="class or interface in java.lang.annotation" class="external-link">@Repeatable</a>(<a href="IRs.html" title="annotation in jdk.test.lib.hotspot.ir_framework">IRs.class</a>)
</span><span class="modifiers">public @interface </span><span class="element-name type-name-label">IR</span></div>
<div class="block">This annotation is used to define a constraint/rule/check on the resulting IR of a test method (method with
 <a href="Test.html" title="annotation in jdk.test.lib.hotspot.ir_framework"><code>@Test</code></a> annotation). A test method can define multiple <code>@IR</code> rules.
 <p>
 There are two kinds of checks that can be specified:
 <ul>
     <li><p><a href="#failOn()"><code>failOn()</code></a>: Specify a list of (node) regexes that should not be matched on the <code>PrintIdeal</code> or
            <code>PrintOptoAssembly</code> output.</li>
     <li><p><a href="#counts()"><code>counts()</code></a>: Specify a list of (<code>regex,count</code>) pairs: The (node) <code>regex</code> should be matched
            for the specified amount in <code>count</code> on the <code>PrintIdeal</code> or <code>PrintOptoAssembly</code> output.</li>
 </ul>
 An IR rule must specify either or both of these two checks. If one or both of the checks fails, an
 <a href="IRViolationException.html" title="class in jdk.test.lib.hotspot.ir_framework"><code>IRViolationException</code></a> is thrown. A user can provide a custom regex string or specify any of the default node
 regexes defined in <a href="IRNode.html" title="class in jdk.test.lib.hotspot.ir_framework"><code>IRNode</code></a>.
 <p>
 Sometimes, the shape of the resulting IR is changed by commonly used VM flags in such a way that an IR rule no longer
 applies. Generally, the framework does <b>not</b> apply any IR rules when any of the following flags are used:
 <code>-Xint, -XX:-UseCompiler, -XX:TieredStopAtLevel={1,2,3}, -DExcludeRandom=true, -DFlipC1C2=true</code>.
 Furthermore, a JTreg test could be run with additional VM and Javaoptions flags. The IR verification is <b>not</b>
 performed in this case if any of these JTreg flags is used that is not part of the whitelist specified by
 <a href="TestFramework.html#JTREG_WHITELIST_FLAGS"><code>TestFramework.JTREG_WHITELIST_FLAGS</code></a>.
 <p>
 For any other flag specified either by user code (e.g. <a href="Scenario.html#%3Cinit%3E(int,java.lang.String...)"><code>Scenario(int, String...)</code></a>,
 <a href="TestFramework.html#runWithFlags(java.lang.String...)"><code>etc.</code></a> or as part of the JTreg whitelist, IR verification is applied.
 To restrict the application of IR rules when certain flags are present that could change the IR, each <code>@IR</code>
 annotation can specify additional preconditions on the allowed test VM flags that must hold when an IR rule is applied.
 If the specified preconditions fail, then the framework does not apply the IR rule. These preconditions can be
 set with <a href="#applyIf()"><code>applyIf()</code></a>, <a href="#applyIfNot()"><code>applyIfNot()</code></a>, <a href="#applyIfAnd()"><code>applyIfAnd()</code></a>, or <a href="#applyIfOr()"><code>applyIfOr()</code></a>.
 <p>
 Examples on how to write tests with IR rules can be found in <code>IRExample</code>
 and also as part of the internal testing in <code>TestIRMatching</code>.</div>
<dl class="notes">
<dt>See Also:</dt>
<dd><a href="Test.html" title="annotation in jdk.test.lib.hotspot.ir_framework"><code>Test</code></a>, 
<a href="IRNode.html" title="class in jdk.test.lib.hotspot.ir_framework"><code>IRNode</code></a></dd>
</dl>
</section>
<section class="summary">
<ul class="summary-list">
<!-- =========== ANNOTATION INTERFACE OPTIONAL MEMBER SUMMARY =========== -->
<li>
<section class="member-summary" id="annotation-interface-optional-element-summary">
<h2>Optional Element Summary</h2>
<div class="caption"><span>Optional Elements</span></div>
<div class="summary-table three-column-summary">
<div class="table-header col-first">Modifier and Type</div>
<div class="table-header col-second">Optional Element</div>
<div class="table-header col-last">Description</div>
<div class="col-first even-row-color"><code><a href="https://download.java.net/java/early_access/jdk17/docs/api/java.base/java/lang/String.html" title="class or interface in java.lang" class="external-link">String</a>[]</code></div>
<div class="col-second even-row-color"><code><a href="#applyIf()" class="member-name-link">applyIf</a></code></div>
<div class="col-last even-row-color">
<div class="block">Define a single VM flag precondition which <i>must hold</i> when applying the IR rule.</div>
</div>
<div class="col-first odd-row-color"><code><a href="https://download.java.net/java/early_access/jdk17/docs/api/java.base/java/lang/String.html" title="class or interface in java.lang" class="external-link">String</a>[]</code></div>
<div class="col-second odd-row-color"><code><a href="#applyIfAnd()" class="member-name-link">applyIfAnd</a></code></div>
<div class="col-last odd-row-color">
<div class="block">Define a list of at least two VM flag precondition which <i><b>all</b> must hold</i> when applying the IR rule.</div>
</div>
<div class="col-first even-row-color"><code><a href="https://download.java.net/java/early_access/jdk17/docs/api/java.base/java/lang/String.html" title="class or interface in java.lang" class="external-link">String</a>[]</code></div>
<div class="col-second even-row-color"><code><a href="#applyIfNot()" class="member-name-link">applyIfNot</a></code></div>
<div class="col-last even-row-color">
<div class="block">Define a single VM flag precondition which <i>must <b>not</b> hold</i> when applying the IR rule.</div>
</div>
<div class="col-first odd-row-color"><code><a href="https://download.java.net/java/early_access/jdk17/docs/api/java.base/java/lang/String.html" title="class or interface in java.lang" class="external-link">String</a>[]</code></div>
<div class="col-second odd-row-color"><code><a href="#applyIfOr()" class="member-name-link">applyIfOr</a></code></div>
<div class="col-last odd-row-color">
<div class="block">Define a list of at least two VM flag precondition from which <i><b>at least one</b> must hold</i> when applying
 the IR rule.</div>
</div>
<div class="col-first even-row-color"><code><a href="https://download.java.net/java/early_access/jdk17/docs/api/java.base/java/lang/String.html" title="class or interface in java.lang" class="external-link">String</a>[]</code></div>
<div class="col-second even-row-color"><code><a href="#counts()" class="member-name-link">counts</a></code></div>
<div class="col-last even-row-color">
<div class="block">Define a list of ((node) regexes,count) string pairs: A regex to be matched on the PrintIdeal or PrintOptoAssembly
 is immediately followed by a number specifying how often the regex should be matched.</div>
</div>
<div class="col-first odd-row-color"><code><a href="https://download.java.net/java/early_access/jdk17/docs/api/java.base/java/lang/String.html" title="class or interface in java.lang" class="external-link">String</a>[]</code></div>
<div class="col-second odd-row-color"><code><a href="#failOn()" class="member-name-link">failOn</a></code></div>
<div class="col-last odd-row-color">
<div class="block">Define a list of (node) regexes.</div>
</div>
</div>
</section>
</li>
</ul>
</section>
<section class="details" id="annotation-interface-element-detail">
<ul class="details-list">
<!-- ============ ANNOTATION INTERFACE MEMBER DETAIL =========== -->
<li>
<section class="member-details">
<h2>Element Details</h2>
<ul class="member-list">
<li>
<section class="detail" id="failOn()">
<h3>failOn</h3>
<div class="member-signature"><span class="return-type"><a href="https://download.java.net/java/early_access/jdk17/docs/api/java.base/java/lang/String.html" title="class or interface in java.lang" class="external-link">String</a>[]</span>&nbsp;<span class="element-name">failOn</span></div>
<div class="block">Define a list of (node) regexes. If any of these regexes are matched on the PrintIdeal or PrintOptoAssembly, the
 IR rule fails and an <a href="IRViolationException.html" title="class in jdk.test.lib.hotspot.ir_framework"><code>IRViolationException</code></a> is thrown.</div>
<dl class="notes">
<dt>Default:</dt>
<dd>{}</dd>
</dl>
</section>
</li>
<li>
<section class="detail" id="counts()">
<h3>counts</h3>
<div class="member-signature"><span class="return-type"><a href="https://download.java.net/java/early_access/jdk17/docs/api/java.base/java/lang/String.html" title="class or interface in java.lang" class="external-link">String</a>[]</span>&nbsp;<span class="element-name">counts</span></div>
<div class="block">Define a list of ((node) regexes,count) string pairs: A regex to be matched on the PrintIdeal or PrintOptoAssembly
 is immediately followed by a number specifying how often the regex should be matched. The number can be proceeded
 by comparators (<code>=, !=, &lt;, &lt;=, =&gt;, &gt;</code>) where the equality operator is optional (default if no comparator is
 specified).
 <p>
 If any constraint on the number of regexes cannot be met, the IR rule fails and an
 <a href="IRViolationException.html" title="class in jdk.test.lib.hotspot.ir_framework"><code>IRViolationException</code></a> is thrown.</div>
<dl class="notes">
<dt>Default:</dt>
<dd>{}</dd>
</dl>
</section>
</li>
<li>
<section class="detail" id="applyIf()">
<h3>applyIf</h3>
<div class="member-signature"><span class="return-type"><a href="https://download.java.net/java/early_access/jdk17/docs/api/java.base/java/lang/String.html" title="class or interface in java.lang" class="external-link">String</a>[]</span>&nbsp;<span class="element-name">applyIf</span></div>
<div class="block">Define a single VM flag precondition which <i>must hold</i> when applying the IR rule. If the VM flag precondition
 fails, then the IR rule is not applied. This is useful if a commonly used flag alters the IR in such a way that an IR rule
 would fail.
 <p>
 The precondition is a (flag, value) string pair where the flag must be a valid VM flag and the value must conform
 with the type of the VM flag. A number based flag value can be proceeded with an additional comparator
 (<code>=, !=, &lt;, &lt;=, =&gt;, &gt;</code>) where the equality operator is optional (default if no comparator is specified).
 <p>
 This is the inverse of <a href="#applyIfNot()"><code>applyIfNot()</code></a>. For multiple preconditions, use <a href="#applyIfAnd()"><code>applyIfAnd()</code></a> or
 <a href="#applyIfOr()"><code>applyIfOr()</code></a> depending on the use case.</div>
<dl class="notes">
<dt>Default:</dt>
<dd>{}</dd>
</dl>
</section>
</li>
<li>
<section class="detail" id="applyIfNot()">
<h3>applyIfNot</h3>
<div class="member-signature"><span class="return-type"><a href="https://download.java.net/java/early_access/jdk17/docs/api/java.base/java/lang/String.html" title="class or interface in java.lang" class="external-link">String</a>[]</span>&nbsp;<span class="element-name">applyIfNot</span></div>
<div class="block">Define a single VM flag precondition which <i>must <b>not</b> hold</i> when applying the IR rule. If, however,
 the VM flag precondition holds, then the IR rule is not applied. This could also be defined as <i>negative</i>
 precondition. This is useful if a commonly used flag alters the IR in such a way that an IR rule would fail.
 <p>
 The precondition is a (flag, value) string pair where the flag must be a valid VM flag and the value must conform
 with the type of the VM flag. A number based flag value can be proceeded with an additional comparator
 (<code>=, !=, &lt;, &lt;=, =&gt;, &gt;</code>) where the equality operator is optional (default if no comparator is specified).
 <p>
 This is the inverse of <a href="#applyIf()"><code>applyIf()</code></a>. For multiple preconditions, use <a href="#applyIfAnd()"><code>applyIfAnd()</code></a> or
 <a href="#applyIfOr()"><code>applyIfOr()</code></a> depending on the use case.</div>
<dl class="notes">
<dt>Default:</dt>
<dd>{}</dd>
</dl>
</section>
</li>
<li>
<section class="detail" id="applyIfAnd()">
<h3>applyIfAnd</h3>
<div class="member-signature"><span class="return-type"><a href="https://download.java.net/java/early_access/jdk17/docs/api/java.base/java/lang/String.html" title="class or interface in java.lang" class="external-link">String</a>[]</span>&nbsp;<span class="element-name">applyIfAnd</span></div>
<div class="block">Define a list of at least two VM flag precondition which <i><b>all</b> must hold</i> when applying the IR rule.
 If the one of the VM flag preconditions does not hold, then the IR rule is not applied. This is useful if
 commonly used flags alter the IR in such a way that an IR rule would fail. This can also be defined as conjunction
 of preconditions.
 <p>
 A precondition is a (flag, value) string pair where the flag must be a valid VM flag and the value must conform
 with the type of the VM flag. A number based flag value can be proceeded with an additional comparator
 (<code>=, !=, &lt;, &lt;=, =&gt;, &gt;</code>) where the equality operator is optional (default if no comparator is specified).
 <p>
 Use  <a href="#applyIfOr()"><code>applyIfOr()</code></a> for disjunction and for single precondition constraints use <a href="#applyIf()"><code>applyIf()</code></a> or
 <a href="#applyIfNot()"><code>applyIfNot()</code></a> depending on the use case.</div>
<dl class="notes">
<dt>Default:</dt>
<dd>{}</dd>
</dl>
</section>
</li>
<li>
<section class="detail" id="applyIfOr()">
<h3>applyIfOr</h3>
<div class="member-signature"><span class="return-type"><a href="https://download.java.net/java/early_access/jdk17/docs/api/java.base/java/lang/String.html" title="class or interface in java.lang" class="external-link">String</a>[]</span>&nbsp;<span class="element-name">applyIfOr</span></div>
<div class="block">Define a list of at least two VM flag precondition from which <i><b>at least one</b> must hold</i> when applying
 the IR rule. If none of the VM flag preconditions holds, then the IR rule is not applied. This is useful if
 commonly used flags alter the IR in such a way that an IR rule would fail. This can also be defined as disjunction
 of preconditions.
 <p>
 A precondition is a (flag, value) string pair where the flag must be a valid VM flag and the value must conform
 with the type of the VM flag. A number based flag value can be proceeded with an additional comparator
 (<code>=, !=, &lt;, &lt;=, =&gt;, &gt;</code>) where the equality operator is optional (default if no comparator is specified).
 <p>
 Use  <a href="#applyIfAnd()"><code>applyIfAnd()</code></a> for conjunction and for single precondition constraints use <a href="#applyIf()"><code>applyIf()</code></a> or
 <a href="#applyIfNot()"><code>applyIfNot()</code></a> depending on the use case.</div>
<dl class="notes">
<dt>Default:</dt>
<dd>{}</dd>
</dl>
</section>
</li>
</ul>
</section>
</li>
</ul>
</section>
<!-- ========= END OF CLASS DATA ========= -->
</main>
</div>
</div>
</body>
</html>
